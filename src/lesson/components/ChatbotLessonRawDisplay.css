/* src/lesson/components/ChatbotLessonRawDisplay.css */

.chatbot-raw-display-container {
  border: none; /* Eliminar borde si el padre ya lo tiene */
  padding: 0; /* Eliminar padding para que el contenido interno lo defina */
  margin: 0 auto; /* Centrar y eliminar margen externo */
  background-color: transparent; /* Fondo transparente para que el padre defina el color */
  box-shadow: none; /* Eliminar sombra si el padre ya la tiene */
  border-radius: 0; /* Eliminar redondeado si el padre ya lo tiene */

  max-height: 70vh; /* Altura máxima para el scroll */
  overflow-y: auto; /* Permite scroll vertical */
  font-family: "Roboto", sans-serif; /* Usar fuente global */
  color: var(--text-color-dark); /* Usar color de texto global */
  width: 100%; /* Ocupar todo el ancho disponible */
}

.chatbot-raw-display-container h3 {
  text-align: center;
  color: var(--primary-color);
  margin-bottom: 20px;
  font-size: 1.6em;
  font-weight: 700;
}

.chatbot-raw-display-container .info-text-debug {
  text-align: center;
  font-size: 0.9em;
  color: #888;
  margin-bottom: 20px;
}

.chatbot-raw-display-exercise-block {
  /* Contenedor para cada "turno" de la IA y su interacción */
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px dashed #e0e0e0; /* Separador entre ejercicios */
  font-size: 0.95em;
  word-break: break-word;
  text-align: left;
  background-color: #ffffff; /* Fondo blanco para cada bloque de ejercicio */
  padding: 15px; /* Padding interno para cada bloque */
  border-radius: var(--border-radius);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); /* Sombra sutil para cada bloque */
}

.chatbot-raw-display-exercise-block:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.chatbot-raw-display-exercise-block h4 {
  color: var(--secondary-color);
  margin-bottom: 8px;
  font-weight: 600;
  font-size: 1.1em;
}

.chatbot-raw-display-exercise-block p {
  margin: 5px 0;
  line-height: 1.5;
}

.chatbot-raw-display-exercise-block strong {
  color: #555;
}

.chatbot-raw-display-exercise-block .label-en {
  color: var(--primary-color);
  font-weight: 500;
}

.chatbot-raw-display-exercise-block .label-es {
  color: #666;
}

.chatbot-raw-display-exercise-block .label-answer {
  color: var(--success-color); /* Color para respuestas correctas */
  font-weight: 500;
}

.chatbot-raw-display-exercise-block .label-options {
  color: var(--info-color); /* Color para opciones */
}

.chatbot-raw-display-exercise-block .label-notes {
  font-style: italic;
  color: #888;
  border-left: 3px solid var(--accent-color); /* Usar accent-color para notas */
  padding-left: 10px;
  margin-top: 10px;
}

.chatbot-raw-display-footer {
  text-align: center;
  font-size: 0.9em;
  color: #666;
  margin-top: 20px;
}

/* Estilos para el área interactiva dentro de cada bloque de ejercicio */
.chat-interactive-area {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 1px solid #eee; /* Separador de la pregunta */
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  width: 100%;
}

.chat-interactive-area.match-correct {
  border-color: var(--success-color);
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2); /* Sombra más sutil */
}

.chat-interactive-area.match-incorrect {
  border-color: var(--error-color);
  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);
}

.chat-exercise-question {
  font-size: 1.1em;
  font-weight: 600;
  color: var(--primary-color);
  text-align: center;
  margin-bottom: 10px;
}

.chat-input-area {
  /* Contenedor para input y botones */
  display: flex;
  gap: 10px;
  width: 100%;
  align-items: center;
}

.chat-input-area .input-field {
  flex-grow: 1;
  padding: 10px 15px;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  font-size: 1em;
}

.chat-input-inline {
  /* Para fill_in_the_blank dentro del chat */
  display: inline-block;
  width: auto;
  min-width: 80px;
  padding: 5px 8px;
  margin: 0 5px;
  border: 1px dashed var(--primary-color);
  border-radius: var(--border-radius);
  font-size: 1em;
  text-align: center;
  background-color: #eef5ff;
}

.chat-send-button {
  background-color: var(--primary-color);
  color: var(--text-color-light);
  padding: 10px 15px;
  border-radius: var(--border-radius);
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.chat-send-button:hover:not(:disabled) {
  background-color: #303f9f;
}

.multiple-choice-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  width: 100%;
}

.multiple-choice-button {
  background-color: var(--secondary-color);
  color: var(--text-color-light);
  padding: 10px 15px;
  border-radius: var(--border-radius);
  font-size: 0.95em;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.multiple-choice-button:hover:not(:disabled) {
  background-color: #512da8;
}
.multiple-choice-button.correct-option {
  background-color: var(--success-color);
}
.multiple-choice-button.incorrect-selected-option {
  background-color: var(--error-color);
}

.chat-answered-display {
  /* Estilo para la respuesta del usuario después de responder */
  background-color: #e0e0e0;
  border-radius: var(--border-radius);
  padding: 10px 15px;
  margin-top: 10px;
  width: 100%;
  text-align: center;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
}
.user-answered-text {
  font-weight: 600;
  color: var(--text-color-dark);
  margin-bottom: 5px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .chatbot-raw-display-container {
    padding: 10px;
    border-radius: 0; /* Pantalla completa */
    box-shadow: none;
    max-height: 90vh; /* Más altura en móvil */
  }
  .chatbot-raw-display-exercise-block {
    padding: 10px;
  }
  .chat-message.ai,
  .chat-message.user {
    max-width: 100%; /* Ocupar más espacio */
  }
  .chat-input-area {
    flex-wrap: wrap;
  }
  .chat-input-area .input-field,
  .chat-input-area .button,
  .chat-input-area .speech-to-text-button {
    width: 100%;
  }
  .audio-button-round.small-button {
    width: 40px;
    height: 40px;
  }
}
